---
title: "Introduction to helpr"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to helpr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
library(helpr)
knitr::opts_chunk$set(
 collapse = TRUE, comment = "#>",
 fig.width = 5, fig.height = 5
)
set.seed(101)
```


The `helpr` package contains numerous helpers,
wrappers, and utilities used throughout the my
analysis suite. It intentionally favors base R
over higher level *tidyverse* to minimize imports.
The goal is to provide an alternative gain in
functionality without the cost of additional imports/dependencies.



--------------------


## Useful functions in `helpr`

* File-system: See `?filesystem`
* Signal UI: See `?signal`
* Symbols: See `?sybml`
* Strings:
    + `squish()`
    + `trim()`
    + `pad()`
    + `capture()`
* Handlers:
    + `be_safe()`
    + `be_quiet()`
    + `be_hard()`
* `liter()`:
    + List iteration, similar to `purrr::imap()` but simpler
* Calculations:
    + `calc_ccc()`: Calculate Lin's Concordance Correlation Coefficient 
      for two vectors of numeric data.
    + `calc_ss()`: Calculate the sum of squared errors:
      $\sum{(x - \bar x)^2}$ for numeric data.
* Logic Tests:
    + `rep_lgl()`: Are all the elements of a vector identical?
    + `is_monotonic()`: Are the numerical elements of a vector
      monotonically increasing or decreasing?
    + `is_logspace()`: Does a given object (`vector`, `data.frame`, `tbl_df`)
      appear to be in log-space? **Note:** this function is biased to
      proteomic data and should not be expected to be accurate for
      other applications out-of-the-box.
* `cross_tab()`
    + Create a contingency table of counts generated by cross-classifying.
* `diff_vecs()`
    + Generate all diffs of two vectors of (typically character) data. Returns
      both sided `setdiff`, `union` and `intersect`.
* `dater()`
    + Generate a standardized data in (by default) `YYYY-MM-DD`.


----------------------

## Examples

### `cross_tab()`

You do not need to "quote" the passed arguments, un-quoted strings are fine
and are parsed by NSE (non-standard evaluation). The `...` can take on either
one or two column names:

```{r cross-tab}
# 1 factor
cross_tab(mtcars, cyl)      # unquoted string

cross_tab(mtcars, "cyl")    # quoted string

var <- "cyl"
cross_tab(mtcars, var)      # external variable

cross_tab(mtcars, cyl, gear)      # 2 factors

cross_tab(mtcars, cyl, gear, am)  # 3 factors
```


### `calc_ccc()`

Calculate the `ccc` for two numeric vectors (visualize by concordance):

```{r ccc, fig.cap = "Concordance plot visualizing `calc_ccc()`."}
x <- rnorm(100, mean = 10, sd = 0.5)
y <- x + rnorm(100, sd = 0.1)   # add random scatter
ccc <- calc_ccc(x, y)
plot(x, y, pch = 21, cex = 1.75, col = NA,
     bg = rgb(red = 0, green = 0, blue = 0, alpha = 0.5),   # black w alpha
     main = sprintf("The CCC = %0.3f with significance of p = %0.3f",
                    ccc$rho.c, ccc$p.value)
)
abline(0, 1, lty = 2, col = "blue", lwd = 1.5)
ccc
```


### `calc_ss()`

Calculate the sum of squared differences for a numeric vector. Used 
ubiquotously in generating variances and standard deviations within other 
contexts (e.g. ANOVA, CVs):

```{r calc-ss}
x <- rnorm(100, mean = 10, sd = 0.5)
calc_ss(x)

calc_ss(x) / (length(x) - 1)    # variance

all.equal(var(x), calc_ss(x) / (length(x) - 1))    # TRUE
```


### `rep_lgl()`

```{r rep-lgl}
rep_lgl(letters)

rep_lgl(rep("A", 250))

rep_lgl(c("B", rep("A", 250)))
```


### `is_monotonic()`

```{r}
is_monotonic(1:100)

is_monotonic(seq(-100, 100, by = 5))     # up

is_monotonic(seq(100, -100, by = -5))    # down

is_monotonic(rnorm(10))
```


### `is_logspace()`

```{r logspace}
# A numeric vector
x <- rnorm(30, mean = 1000)
is_logspace(x)

is_logspace(log(x))
```

```{r logspace2, eval = FALSE}
is_logspace(data) # FALSE

# log10-transform
for ( i in grep("^ft", names(data)) ) {
  data[[i]] <- log10(data[[i]])
}

is_logspace(data) # base 10; TRUE
```


### `diff_vecs()`

```{r}
diff_vecs(LETTERS[1:10L], LETTERS[5:15L], verbose = TRUE) # return invisible

(diff_vecs(LETTERS[1:10L], LETTERS[5:15L]))
```


### `dater()`

```{r dater, fig.cap = "Standardized date format using `dater()`."}
data <- data.frame(x = rnorm(100), y = rnorm(100))
plot(data$x, data$y, main = paste0("This is today's date: ", dater()))
```

